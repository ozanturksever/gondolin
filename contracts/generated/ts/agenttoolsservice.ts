// Code generated by dink codegen. DO NOT EDIT.

import type { ServiceCaller, Subscription } from '@fatagnus/dink-sdk';
import type { ExecCommandRequest, ExecCommandResponse, ReadFileRequest, ReadFileResponse, WriteFileRequest, WriteFileResponse, DeleteFileRequest, DeleteFileResponse, ListFilesRequest, ListFilesResponse, SearchCodebaseRequest, SearchCodebaseResponse, RunTestsRequest, RunTestsResponse, InstallPackageRequest, InstallPackageResponse, ExportPatchRequest, ExportPatchResponse } from './types.js';

// ============================================================================
// AI Context Types
// ============================================================================

/**
 * Service AI context providing AI-specific guidance.
 */
export interface ServiceAIContext {
  overview?: string;
  capabilities?: string[];
  limitations?: string[];
}

/**
 * Method AI context providing AI-specific guidance.
 */
export interface MethodAIContext {
  whenToUse?: string;
  whyToUse?: string;
  howToUse?: string;
  preconditions?: string[];
  sideEffects?: string[];
  relatedMethods?: string[];
  scenarios?: string[];
}

/**
 * Method descriptor providing complete metadata about a service method.
 */
export interface MethodDescriptor {
  name: string;
  description?: string;
  inputSchema?: Record<string, unknown>;
  outputSchema?: Record<string, unknown>;
  aiContext?: MethodAIContext;
}

/**
 * Service descriptor providing complete metadata about a service.
 */
export interface ServiceDescriptor {
  name: string;
  version: string;
  description?: string;
  aiContext?: ServiceAIContext;
  methods: MethodDescriptor[];
}

// ============================================================================
// AgentToolsService Client Class
// ============================================================================

class AgentToolsServiceClientImpl {
  private edgeId: string;
  private caller: ServiceCaller;

  constructor(edgeId: string, caller: ServiceCaller) {
    this.edgeId = edgeId;
    this.caller = caller;
  }

  getEdgeId(): string {
    return this.edgeId;
  }


  async ExecCommand(req: ExecCommandRequest): Promise<ExecCommandResponse> {
    return this.caller.call<ExecCommandRequest, ExecCommandResponse>(
      this.edgeId,
      'AgentToolsService',
      'ExecCommand',
      req
    );
  }


  async ReadFile(req: ReadFileRequest): Promise<ReadFileResponse> {
    return this.caller.call<ReadFileRequest, ReadFileResponse>(
      this.edgeId,
      'AgentToolsService',
      'ReadFile',
      req
    );
  }


  async WriteFile(req: WriteFileRequest): Promise<WriteFileResponse> {
    return this.caller.call<WriteFileRequest, WriteFileResponse>(
      this.edgeId,
      'AgentToolsService',
      'WriteFile',
      req
    );
  }


  async DeleteFile(req: DeleteFileRequest): Promise<DeleteFileResponse> {
    return this.caller.call<DeleteFileRequest, DeleteFileResponse>(
      this.edgeId,
      'AgentToolsService',
      'DeleteFile',
      req
    );
  }


  async ListFiles(req: ListFilesRequest): Promise<ListFilesResponse> {
    return this.caller.call<ListFilesRequest, ListFilesResponse>(
      this.edgeId,
      'AgentToolsService',
      'ListFiles',
      req
    );
  }


  async SearchCodebase(req: SearchCodebaseRequest): Promise<SearchCodebaseResponse> {
    return this.caller.call<SearchCodebaseRequest, SearchCodebaseResponse>(
      this.edgeId,
      'AgentToolsService',
      'SearchCodebase',
      req
    );
  }


  async RunTests(req: RunTestsRequest): Promise<RunTestsResponse> {
    return this.caller.call<RunTestsRequest, RunTestsResponse>(
      this.edgeId,
      'AgentToolsService',
      'RunTests',
      req
    );
  }


  async InstallPackage(req: InstallPackageRequest): Promise<InstallPackageResponse> {
    return this.caller.call<InstallPackageRequest, InstallPackageResponse>(
      this.edgeId,
      'AgentToolsService',
      'InstallPackage',
      req
    );
  }


  async ExportPatch(req: ExportPatchRequest): Promise<ExportPatchResponse> {
    return this.caller.call<ExportPatchRequest, ExportPatchResponse>(
      this.edgeId,
      'AgentToolsService',
      'ExportPatch',
      req
    );
  }


}

// ============================================================================
// AgentToolsService Service Descriptor (Embedded AI Metadata)
// ============================================================================

const descriptor: ServiceDescriptor = {
  name: "AgentToolsService",
  version: "1.0.0",
  description: "AgentToolsService provides file operations and command execution. Exposed on the Gondolin host edge (role=host). Serves both LLM tool calls and browser file operations via Dink RPC.",
  methods: [
    {
      name: "ExecCommand",
      description: "ExecCommand runs a shell command in the sandbox.",
      inputSchema: {"$schema":"https://json-schema.org/draft/2020-12/schema","properties":{"command":{"type":"string"},"cwd":{"type":"string"},"env":{"additionalProperties":{"type":"string"},"type":"object"},"timeoutMs":{"description":"32-bit signed integer","type":"integer"}},"required":["command","cwd","env","timeoutMs"],"title":"ExecCommandRequest","type":"object"},
      outputSchema: {"$schema":"https://json-schema.org/draft/2020-12/schema","properties":{"result":{"properties":{"exitCode":{"description":"32-bit signed integer","type":"integer"},"stderr":{"type":"string"},"stdout":{"type":"string"}},"required":["exitCode","stdout","stderr"],"type":"object"}},"required":["result"],"title":"ExecCommandResponse","type":"object"},
    },
    {
      name: "ReadFile",
      description: "ReadFile reads a file from the workspace.",
      inputSchema: {"$schema":"https://json-schema.org/draft/2020-12/schema","properties":{"encoding":{"type":"string"},"length":{"description":"64-bit signed integer","type":"integer"},"offset":{"description":"64-bit signed integer","type":"integer"},"path":{"type":"string"}},"required":["path","encoding","offset","length"],"title":"ReadFileRequest","type":"object"},
      outputSchema: {"$schema":"https://json-schema.org/draft/2020-12/schema","properties":{"content":{"type":"string"},"info":{"properties":{"createdAt":{"format":"date-time","type":"string"},"mode":{"description":"32-bit signed integer","type":"integer"},"modifiedAt":{"format":"date-time","type":"string"},"name":{"type":"string"},"path":{"type":"string"},"size":{"description":"64-bit signed integer","type":"integer"},"type":{"type":"object"}},"required":["path","name","size","type","mode","modifiedAt","createdAt"],"type":"object"}},"required":["content","info"],"title":"ReadFileResponse","type":"object"},
    },
    {
      name: "WriteFile",
      description: "WriteFile writes content to a file in the workspace.",
      inputSchema: {"$schema":"https://json-schema.org/draft/2020-12/schema","properties":{"content":{"type":"string"},"createDirs":{"type":"boolean"},"encoding":{"type":"string"},"mode":{"description":"32-bit signed integer","type":"integer"},"path":{"type":"string"}},"required":["path","content","encoding","createDirs","mode"],"title":"WriteFileRequest","type":"object"},
      outputSchema: {"$schema":"https://json-schema.org/draft/2020-12/schema","properties":{"info":{"properties":{"createdAt":{"format":"date-time","type":"string"},"mode":{"description":"32-bit signed integer","type":"integer"},"modifiedAt":{"format":"date-time","type":"string"},"name":{"type":"string"},"path":{"type":"string"},"size":{"description":"64-bit signed integer","type":"integer"},"type":{"type":"object"}},"required":["path","name","size","type","mode","modifiedAt","createdAt"],"type":"object"}},"required":["info"],"title":"WriteFileResponse","type":"object"},
    },
    {
      name: "DeleteFile",
      description: "DeleteFile removes a file or directory from the workspace.",
      inputSchema: {"$schema":"https://json-schema.org/draft/2020-12/schema","properties":{"path":{"type":"string"},"recursive":{"type":"boolean"}},"required":["path","recursive"],"title":"DeleteFileRequest","type":"object"},
      outputSchema: {"$schema":"https://json-schema.org/draft/2020-12/schema","properties":{"deleted":{"type":"boolean"}},"required":["deleted"],"title":"DeleteFileResponse","type":"object"},
    },
    {
      name: "ListFiles",
      description: "ListFiles lists files and directories in the workspace.",
      inputSchema: {"$schema":"https://json-schema.org/draft/2020-12/schema","properties":{"includeHidden":{"type":"boolean"},"path":{"type":"string"},"pattern":{"type":"string"},"recursive":{"type":"boolean"}},"required":["path","recursive","pattern","includeHidden"],"title":"ListFilesRequest","type":"object"},
      outputSchema: {"$schema":"https://json-schema.org/draft/2020-12/schema","properties":{"files":{"items":{"properties":{"createdAt":{"format":"date-time","type":"string"},"mode":{"description":"32-bit signed integer","type":"integer"},"modifiedAt":{"format":"date-time","type":"string"},"name":{"type":"string"},"path":{"type":"string"},"size":{"description":"64-bit signed integer","type":"integer"},"type":{"type":"object"}},"required":["path","name","size","type","mode","modifiedAt","createdAt"],"type":"object"},"type":"array"}},"required":["files"],"title":"ListFilesResponse","type":"object"},
    },
    {
      name: "SearchCodebase",
      description: "SearchCodebase searches for text patterns across the workspace.",
      inputSchema: {"$schema":"https://json-schema.org/draft/2020-12/schema","properties":{"caseSensitive":{"type":"boolean"},"contextLines":{"description":"32-bit signed integer","type":"integer"},"filePattern":{"type":"string"},"maxResults":{"description":"32-bit signed integer","type":"integer"},"path":{"type":"string"},"pattern":{"type":"string"}},"required":["pattern","path","filePattern","caseSensitive","maxResults","contextLines"],"title":"SearchCodebaseRequest","type":"object"},
      outputSchema: {"$schema":"https://json-schema.org/draft/2020-12/schema","properties":{"matches":{"items":{"properties":{"column":{"description":"32-bit signed integer","type":"integer"},"contextAfter":{"items":{"type":"string"},"type":"array"},"contextBefore":{"items":{"type":"string"},"type":"array"},"line":{"description":"32-bit signed integer","type":"integer"},"path":{"type":"string"},"text":{"type":"string"}},"required":["path","line","column","text","contextBefore","contextAfter"],"type":"object"},"type":"array"},"totalMatches":{"description":"32-bit signed integer","type":"integer"},"truncated":{"type":"boolean"}},"required":["matches","totalMatches","truncated"],"title":"SearchCodebaseResponse","type":"object"},
    },
    {
      name: "RunTests",
      description: "RunTests executes the project's test suite.",
      inputSchema: {"$schema":"https://json-schema.org/draft/2020-12/schema","properties":{"env":{"additionalProperties":{"type":"string"},"type":"object"},"path":{"type":"string"},"pattern":{"type":"string"},"timeoutMs":{"description":"32-bit signed integer","type":"integer"}},"required":["path","pattern","env","timeoutMs"],"title":"RunTestsRequest","type":"object"},
      outputSchema: {"$schema":"https://json-schema.org/draft/2020-12/schema","properties":{"failed":{"description":"32-bit signed integer","type":"integer"},"passed":{"description":"32-bit signed integer","type":"integer"},"result":{"properties":{"exitCode":{"description":"32-bit signed integer","type":"integer"},"stderr":{"type":"string"},"stdout":{"type":"string"}},"required":["exitCode","stdout","stderr"],"type":"object"},"skipped":{"description":"32-bit signed integer","type":"integer"},"total":{"description":"32-bit signed integer","type":"integer"}},"required":["result","total","passed","failed","skipped"],"title":"RunTestsResponse","type":"object"},
    },
    {
      name: "InstallPackage",
      description: "InstallPackage installs a package dependency.",
      inputSchema: {"$schema":"https://json-schema.org/draft/2020-12/schema","properties":{"dev":{"type":"boolean"},"packageManager":{"type":"string"},"packageName":{"type":"string"},"version":{"type":"string"}},"required":["packageName","version","dev","packageManager"],"title":"InstallPackageRequest","type":"object"},
      outputSchema: {"$schema":"https://json-schema.org/draft/2020-12/schema","properties":{"installedVersion":{"type":"string"},"result":{"properties":{"exitCode":{"description":"32-bit signed integer","type":"integer"},"stderr":{"type":"string"},"stdout":{"type":"string"}},"required":["exitCode","stdout","stderr"],"type":"object"}},"required":["result","installedVersion"],"title":"InstallPackageResponse","type":"object"},
    },
    {
      name: "ExportPatch",
      description: "ExportPatch generates a unified diff of all workspace changes.",
      inputSchema: {"$schema":"https://json-schema.org/draft/2020-12/schema","properties":{"basePath":{"type":"string"},"paths":{"items":{"type":"string"},"type":"array"}},"required":["basePath","paths"],"title":"ExportPatchRequest","type":"object"},
      outputSchema: {"$schema":"https://json-schema.org/draft/2020-12/schema","properties":{"patch":{"properties":{"changes":{"items":{"properties":{"diff":{"type":"string"},"path":{"type":"string"},"type":{"type":"object"}},"required":["path","type","diff"],"type":"object"},"type":"array"},"content":{"type":"string"},"filesChanged":{"description":"32-bit signed integer","type":"integer"},"linesAdded":{"description":"32-bit signed integer","type":"integer"},"linesRemoved":{"description":"32-bit signed integer","type":"integer"}},"required":["content","filesChanged","linesAdded","linesRemoved","changes"],"type":"object"}},"required":["patch"],"title":"ExportPatchResponse","type":"object"},
    },
    {
      name: "CreateSandbox",
      description: "CreateSandbox provisions and starts a new Gondolin VM sandbox.",
      inputSchema: {"$schema":"https://json-schema.org/draft/2020-12/schema","properties":{"config":{"properties":{"agent":{"type":"string"},"environment":{"additionalProperties":{"type":"string"},"type":"object"},"gitRepo":{"properties":{"branch":{"type":"string"},"commit":{"type":"string"},"subPath":{"type":"string"},"url":{"type":"string"}},"required":["url","branch","commit","subPath"],"type":"object"},"image":{"type":"string"},"networkEnabled":{"type":"boolean"},"resources":{"properties":{"cpu":{"description":"64-bit floating point","type":"number"},"diskMb":{"description":"32-bit signed integer","type":"integer"},"memoryMb":{"description":"32-bit signed integer","type":"integer"}},"required":["cpu","memoryMb","diskMb"],"type":"object"},"timeoutSeconds":{"description":"32-bit signed integer","type":"integer"},"workingDirectory":{"type":"string"}},"required":["resources","agent","gitRepo","environment","image","timeoutSeconds","networkEnabled","workingDirectory"],"type":"object"},"workloadId":{"type":"string"},"workspaceId":{"type":"string"}},"required":["workspaceId","workloadId","config"],"title":"CreateSandboxRequest","type":"object"},
      outputSchema: {"$schema":"https://json-schema.org/draft/2020-12/schema","properties":{"createdAt":{"format":"date-time","type":"string"},"sandboxId":{"type":"string"},"status":{"type":"object"}},"required":["sandboxId","status","createdAt"],"title":"CreateSandboxResponse","type":"object"},
    },
    {
      name: "DestroySandbox",
      description: "DestroySandbox shuts down and removes a sandbox.",
      inputSchema: {"$schema":"https://json-schema.org/draft/2020-12/schema","properties":{"extractChanges":{"type":"boolean"},"force":{"type":"boolean"},"preserveAgentfs":{"type":"boolean"},"sandboxId":{"type":"string"}},"required":["sandboxId","preserveAgentfs","extractChanges","force"],"title":"DestroySandboxRequest","type":"object"},
      outputSchema: {"$schema":"https://json-schema.org/draft/2020-12/schema","properties":{"changes":{"properties":{"changes":{"items":{"properties":{"diff":{"type":"string"},"path":{"type":"string"},"type":{"type":"object"}},"required":["path","type","diff"],"type":"object"},"type":"array"},"content":{"type":"string"},"filesChanged":{"description":"32-bit signed integer","type":"integer"},"linesAdded":{"description":"32-bit signed integer","type":"integer"},"linesRemoved":{"description":"32-bit signed integer","type":"integer"}},"required":["content","filesChanged","linesAdded","linesRemoved","changes"],"type":"object"},"destroyed":{"type":"boolean"}},"required":["destroyed","changes"],"title":"DestroySandboxResponse","type":"object"},
    },
    {
      name: "GetStatus",
      description: "GetStatus returns the current status and health of a sandbox.",
      inputSchema: {"$schema":"https://json-schema.org/draft/2020-12/schema","properties":{"sandboxId":{"type":"string"}},"required":["sandboxId"],"title":"GetStatusRequest","type":"object"},
      outputSchema: {"$schema":"https://json-schema.org/draft/2020-12/schema","properties":{"agent":{"type":"string"},"createdAt":{"format":"date-time","type":"string"},"error":{"type":"string"},"metrics":{"properties":{"cpuPercent":{"description":"64-bit floating point","type":"number"},"diskUsageMb":{"description":"64-bit floating point","type":"number"},"memoryUsageMb":{"description":"64-bit floating point","type":"number"},"networkBytesReceived":{"description":"64-bit signed integer","type":"integer"},"networkBytesSent":{"description":"64-bit signed integer","type":"integer"},"updatedAt":{"format":"date-time","type":"string"}},"required":["cpuPercent","memoryUsageMb","diskUsageMb","networkBytesSent","networkBytesReceived","updatedAt"],"type":"object"},"resources":{"properties":{"cpu":{"description":"64-bit floating point","type":"number"},"diskMb":{"description":"32-bit signed integer","type":"integer"},"memoryMb":{"description":"32-bit signed integer","type":"integer"}},"required":["cpu","memoryMb","diskMb"],"type":"object"},"sandboxId":{"type":"string"},"startedAt":{"format":"date-time","type":"string"},"status":{"type":"object"},"workloadId":{"type":"string"},"workspaceId":{"type":"string"}},"required":["sandboxId","workspaceId","workloadId","status","agent","resources","createdAt","startedAt","error","metrics"],"title":"GetStatusResponse","type":"object"},
    },
    {
      name: "ListSandboxes",
      description: "ListSandboxes returns all sandboxes, optionally filtered by workspace.",
      inputSchema: {"$schema":"https://json-schema.org/draft/2020-12/schema","properties":{"activeOnly":{"type":"boolean"},"workspaceId":{"type":"string"}},"required":["workspaceId","activeOnly"],"title":"ListSandboxesRequest","type":"object"},
      outputSchema: {"$schema":"https://json-schema.org/draft/2020-12/schema","properties":{"sandboxes":{"items":{"properties":{"agent":{"type":"string"},"createdAt":{"format":"date-time","type":"string"},"sandboxId":{"type":"string"},"startedAt":{"format":"date-time","type":"string"},"status":{"type":"object"},"workloadId":{"type":"string"},"workspaceId":{"type":"string"}},"required":["sandboxId","workspaceId","workloadId","status","agent","createdAt","startedAt"],"type":"object"},"type":"array"}},"required":["sandboxes"],"title":"ListSandboxesResponse","type":"object"},
    },
  ],
};

const definition = {
  name: 'AgentToolsService',
  version: '1.0.0',
  methods: [
    'ExecCommand',
    'ReadFile',
    'WriteFile',
    'DeleteFile',
    'ListFiles',
    'SearchCodebase',
    'RunTests',
    'InstallPackage',
    'ExportPatch',
  ],
};

// ============================================================================
// Helper Functions
// ============================================================================

function formatAsLLMTxt(sd: ServiceDescriptor): string {
  const lines: string[] = [];

  lines.push(`# ${sd.name} LLM Reference`);
  lines.push('');

  if (sd.description) {
    lines.push(`> ${sd.description}`);
    lines.push('');
  }

  if (sd.aiContext) {
    if (sd.aiContext.overview) {
      lines.push('## When to Use This Service');
      lines.push('');
      lines.push(sd.aiContext.overview);
      lines.push('');
    }

    if (sd.aiContext.capabilities && sd.aiContext.capabilities.length > 0) {
      lines.push('## Capabilities');
      lines.push('');
      for (const cap of sd.aiContext.capabilities) {
        lines.push(`- ${cap}`);
      }
      lines.push('');
    }

    if (sd.aiContext.limitations && sd.aiContext.limitations.length > 0) {
      lines.push('## Limitations');
      lines.push('');
      for (const lim of sd.aiContext.limitations) {
        lines.push(`- ${lim}`);
      }
      lines.push('');
    }
  }

  if (sd.methods.length > 0) {
    lines.push('## Methods');
    lines.push('');

    for (const method of sd.methods) {
      lines.push(`### ${method.name}`);
      lines.push('');

      if (method.description) {
        lines.push(method.description);
        lines.push('');
      }

      if (method.aiContext) {
        if (method.aiContext.whenToUse) {
          lines.push(`**When to use:** ${method.aiContext.whenToUse}`);
          lines.push('');
        }
        if (method.aiContext.whyToUse) {
          lines.push(`**Why:** ${method.aiContext.whyToUse}`);
          lines.push('');
        }
        if (method.aiContext.howToUse) {
          lines.push(`**How:** ${method.aiContext.howToUse}`);
          lines.push('');
        }
      }

      if (method.inputSchema) {
        lines.push('#### Request Schema');
        lines.push('');
        lines.push('```json');
        lines.push(JSON.stringify(method.inputSchema, null, 2));
        lines.push('```');
        lines.push('');
      }

      if (method.outputSchema) {
        lines.push('#### Response Schema');
        lines.push('');
        lines.push('```json');
        lines.push(JSON.stringify(method.outputSchema, null, 2));
        lines.push('```');
        lines.push('');
      }
    }
  }

  return lines.join('\n');
}

function getMethodAIImpl(methodName: string): MethodAIContext | undefined {
  const method = descriptor.methods.find(m => m.name === methodName);
  return method?.aiContext;
}

function getLLMContextImpl(): string {
  return formatAsLLMTxt(descriptor);
}

// ============================================================================
// AgentToolsService Companion Object (Primary Export)
// ============================================================================

/**
 * AgentToolsService companion object with embedded AI metadata.
 * 
 * Usage:
 *   import { AgentToolsService } from './generated';
 *   
 *   // Create client
 *   const client = new AgentToolsService.Client(edgeId, caller);
 *   
 *   // Access embedded AI metadata (no network call)
 *   const serviceAI = AgentToolsService.descriptor.aiContext;
 *   const methodAI = AgentToolsService.getMethodAI('SomeMethod');
 *   const llmTxt = AgentToolsService.getLLMContext();
 */
export const AgentToolsService = {
  /** Client class for making RPC calls */
  Client: AgentToolsServiceClientImpl,
  /** Full service descriptor with embedded AI context */
  descriptor,
  /** Service definition metadata */
  Definition: definition,
  /** Get AI context for a specific method */
  getMethodAI: getMethodAIImpl,
  /** Get LLM-friendly documentation (llm.txt format) */
  getLLMContext: getLLMContextImpl,
} as const;

// ============================================================================
// Backward-Compatible Exports
// ============================================================================

/** @deprecated Use AgentToolsService.Client instead */
export const AgentToolsServiceClient = AgentToolsServiceClientImpl;

/** @deprecated Use AgentToolsService.descriptor instead */
export const AgentToolsServiceDescriptor = descriptor;

/** @deprecated Use AgentToolsService.Definition instead */
export const AgentToolsServiceDefinition = definition;

/** @deprecated Use AgentToolsService.getLLMContext() instead */
export function getAgentToolsServiceLLMContext(): string {
  return getLLMContextImpl();
}
